<div class="demandes-container">
  <p-toast />

  <p-card>
    <ng-template pTemplate="header">
      <div class="card-header">
        <div class="card-header-title">
          <i class="pi pi-map-marker header-icon" aria-hidden="true"></i>
          <div>
            <h1>Demandes d'emplacement</h1>
            <p class="header-subtitle">{{ demandes().length }} demande(s) au total</p>
          </div>
        </div>
        <div class="header-actions">
          <p-button
            label="Actualiser"
            icon="pi pi-refresh"
            [loading]="loading()"
            (onClick)="loadDemandes()"
            [outlined]="true"
            severity="secondary"
          />
        </div>
      </div>
    </ng-template>

    <app-generic-list
      [data]="demandes()"
      [loading]="loading()"
      [config]="listConfig"
    />
  </p-card>
</div>

<!-- Accept confirmation dialog -->
<app-generic-confirm-dialog
  [visible]="acceptDialogVisible()"
  header="Accepter la demande"
  [message]="acceptMessage"
  icon="pi-check-circle"
  severity="success"
  confirmLabel="Accepter"
  confirmIcon="pi-check"
  cancelLabel="Annuler"
  [loading]="accepting()"
  (visibleChange)="$event ? null : cancelAccept()"
  (confirm)="executeAccept()"
  (cancel)="cancelAccept()"
/>

<!-- Reject dialog with motif form -->
<app-generic-form-dialog
  [form]="rejectForm"
  [fields]="rejectFields"
  [visible]="rejectDialogVisible()"
  title="Refuser la demande"
  [saving]="rejecting()"
  saveLabel="Confirmer le refus"
  saveIcon="pi-times"
  (visibleChange)="$event ? null : cancelReject()"
  (save)="executeReject()"
  (cancel)="cancelReject()"
/>
